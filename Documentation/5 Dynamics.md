# 5 Dynamics

The Sinsy voice model doesn't have labelled data for dynamics so tags such as
p, mp, mf, and f and crescendo/diminuendo tags are not handled.

The applyDynamicsToWAV.py will post-process a WAV file that was already
generated by Sinsy, and will apply the dynamics tags and crescendo/diminuendo.
Care should be exercised if dynamic compression is later applied which will
reduce the dynamic range.

## applyDynamicsToWAV.py

This will post-process a WAV file and generate another WAV file with
dynamics and crescendo/diminuendo.

```
usage: applyDynamicsToWAV.py [-h] [--inxml INXML] --inwav INWAV
                             [--outdynamics OUTDYNAMICS]
                             [--outenvelope OUTENVELOPE] [--outwav OUTWAV]
                             [--pppp PPPP] [--ppp PPP] [--pp PP] [--p P]
                             [--mp MP] [--n N] [--mf MF] [--f F] [--ff FF]
                             [--fff FFF] [--ffff FFFF] [--smoothing SMOOTHING]
                             [--crescendo CRESCENDO] [--diminuendo DIMINUENDO]

optional arguments:
  -h, --help            show this help message and exit
  --inxml INXML         name of the input xml file or stdin if not specified
  --inwav INWAV         name of the input wav file
  --outdynamics OUTDYNAMICS
                        name of output file for dynamics information for
                        debugging (optional)
  --outenvelope OUTENVELOPE
                        name of output file for envelope information for
                        debugging, the resulting file can be plotted using a
                        program like gnuplot (optional)
  --outwav OUTWAV       name of output file for wave or stdout if not
                        specified
  --pppp PPPP           value for dynamic pppp, between 0.0 and 1.0, default
                        is 0.5
  --ppp PPP             value for dynamic ppp, between 0.0 and 1.0, default is
                        0.5
  --pp PP               value for dynamic pp, between 0.0 and 1.0, default is
                        0.5
  --p P                 value for dynamic p, between 0.0 and 1.0, default is
                        0.5
  --mp MP               value for dynamic mp, between 0.0 and 1.0, default is
                        0.65
  --n N                 value for dynamic n, between 0.0 and 1.0, default is
                        0.75
  --mf MF               value for dynamic mf, between 0.0 and 1.0, default is
                        0.85
  --f F                 value for dynamic f, between 0.0 and 1.0, default is
                        1.0
  --ff FF               value for dynamic ff, between 0.0 and 1.0, default is
                        1.0
  --fff FFF             value for dynamic fff, between 0.0 and 1.0, default is
                        1.0
  --ffff FFFF           value for dynamic ffff, between 0.0 and 1.0, default
                        is 1.0
  --smoothing SMOOTHING
                        value for smoothing dynamic changes, represents time
                        percentage of a measure, default is 0.05
  --crescendo CRESCENDO
                        change value for applying crescendo, default is 0.15
  --diminuendo DIMINUENDO
                        change value for applying diminuendo, should be
                        negative, default is -0.15
```

Example usage:

> $ python applyDynamicsToWAV.py --inwav input.wav --outdynamics dynamics.txt --outenvelope envelope.txt

This will read the XML file from stdin and write the WAV file to stdout.

## printDynamics.py

This will extract and print the dynamics tags (like p, mp, f) in an XML file.

```
usage: printDynamics.py [-h] [xmlfile]

positional arguments:
  xmlfile     name of the xml file or - for stdin

optional arguments:
  -h, --help  show this help message and exit
```

Example usage:

> $ python printDynamics.py input.xml

